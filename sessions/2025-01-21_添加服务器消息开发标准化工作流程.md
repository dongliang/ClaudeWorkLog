# [2025-01-21] æ·»åŠ æœåŠ¡å™¨æ¶ˆæ¯å¼€å‘æ ‡å‡†åŒ–å·¥ä½œæµç¨‹åˆ°é¡¹ç›®CLAUDE.md

## å…ƒä¿¡æ¯
- æ—¥æœŸ: 2025-01-21
- é¡¹ç›®: GuiRen (é¬¼åˆƒæ¸¸æˆæœåŠ¡å™¨)
- ä¸»è¦é—®é¢˜: å°†æ ‡å‡†åŒ–çš„æœåŠ¡å™¨æ¶ˆæ¯å¼€å‘å·¥ä½œæµç¨‹æ–‡æ¡£æ•´åˆåˆ°é¡¹ç›®çš„ CLAUDE.md ä¸­

---

## å®Œæ•´å¯¹è¯

### å¯¹è¯1
**ç”¨æˆ·**:
```
ğŸ¯ æœåŠ¡å™¨æ¶ˆæ¯å¼€å‘æ ‡å‡†åŒ–å·¥ä½œæµç¨‹

  ğŸ“– æ ¸å¿ƒç†å¿µ

  ä¸‰å±‚åˆ†ç¦»åŸåˆ™:
  - é™æ€å±‚: é…ç½®æ•°æ®é¢„å¤„ç† (å¯åŠ¨æ—¶ä¸€æ¬¡æ€§è®¡ç®—)
  - ä¸šåŠ¡å±‚: æ¨¡å—ä¸šåŠ¡é€»è¾‘ (å°è£…çŠ¶æ€ä¿®æ”¹å’Œè®¡ç®—)
  - èƒ¶æ°´å±‚: æ¶ˆæ¯å¤„ç†å™¨ (è¿æ¥è¯·æ±‚ã€ä¸šåŠ¡ã€å“åº”)

  è‡ªåº•å‘ä¸ŠåŸåˆ™: å…ˆä¾èµ–åä¸šåŠ¡,ç¡®ä¿æ‰€æœ‰ä¾èµ–åœ¨ä½¿ç”¨å‰å°±ç»ª

  ---
  ğŸ“‹ æ€»ä½“æµç¨‹å›¾

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    éœ€æ±‚æ¥æº: MessageHandler ä¸­çš„æ¶ˆæ¯    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   æŒ‡ä»¤0: å‰ç½®æ£€æŸ¥    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   æŒ‡ä»¤1: å¸¸é‡å¯¹é½    â”‚ â—„â”€â”€â”€ æ­¥éª¤1
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ æŒ‡ä»¤2: é…ç½®é¢„å¤„ç†    â”‚ â—„â”€â”€â”€ æ­¥éª¤2
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ æŒ‡ä»¤3: æ¨¡å—å¼ºç±»å‹åŒ–  â”‚ â—„â”€â”€â”€ æ­¥éª¤3
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ æŒ‡ä»¤4: å®ç°æ¶ˆæ¯å‡½æ•°  â”‚ â—„â”€â”€â”€ æ­¥éª¤4
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   æŒ‡ä»¤5: ç¼–è¯‘éªŒè¯    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   æŒ‡ä»¤6: å®¢æˆ·ç«¯æµ‹è¯•  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ---
  ğŸ”§ æŒ‡ä»¤æ¸…å•

  æŒ‡ä»¤0: å‰ç½®æ£€æŸ¥ (Pre-Check)

  ç›®æ ‡: ç†è§£æ¶ˆæ¯éœ€æ±‚å’Œå®¢æˆ·ç«¯å®ç°

  æ‰§è¡Œæ­¥éª¤:

  1. æŸ¥çœ‹åè®®å®šä¹‰:
     - æ–‡ä»¶: c2s.proto, s2c.proto
     - ç¡®è®¤: request å‚æ•°, response å­—æ®µ

  2. æŸ¥çœ‹å®¢æˆ·ç«¯å‘é€æ—¶æœº:
     - æœç´¢: grep -n "session:call.*{æ¶ˆæ¯å}" ../Client/WuShuang2/**/*.lua
     - ç¡®è®¤: ä½•æ—¶å‘é€, å‘é€ä»€ä¹ˆå‚æ•°

  3. æŸ¥çœ‹å®¢æˆ·ç«¯æ•°æ®æ¶ˆè´¹é€»è¾‘:
     - é‡ç‚¹: å®¢æˆ·ç«¯å¦‚ä½•æ¶ˆè´¹ sync_list åŒæ­¥çš„æ¨¡å—æ•°æ®
     - æœç´¢: grep -n "{æ¨¡å—å}\.{å­—æ®µå}" ../Client/WuShuang2/**/*.lua
     - ç¡®è®¤: UI åˆ·æ–°, æˆ˜æ–—è®¡ç®—, äº‹ä»¶è§¦å‘ç­‰æ¶ˆè´¹åœºæ™¯

  4. ç¡®è®¤å®¢æˆ·ç«¯æ¥æ”¶å¤„ç†:
     - æœç´¢: grep -n "function.*on_{æ¶ˆæ¯å}" ../Client/WuShuang2/**/*.lua
     - ç¡®è®¤: æ¥æ”¶ååšäº†ä»€ä¹ˆ (é€šå¸¸å¾ˆè½»é‡)

  è¾“å‡º:
  - ç†è§£æ¶ˆæ¯çš„ä¸šåŠ¡å«ä¹‰
  - ç†è§£è¯·æ±‚å‚æ•°å«ä¹‰
  - ç†è§£å“åº”å­—æ®µç”¨é€”
  - ç†è§£å®¢æˆ·ç«¯å¦‚ä½•æ¶ˆè´¹æ•°æ®

  å…³é”®è®¤çŸ¥:
  æ¸¸æˆå¤§éƒ¨åˆ†æ•°æ®é€šè¿‡ sync_list è‡ªåŠ¨åŒæ­¥,è€Œéæ˜¾å¼ response å­—æ®µã€‚
  è¦ç†è§£å®¢æˆ·ç«¯"æ¶ˆè´¹"æ•°æ®çš„é€»è¾‘,è€Œéä»…çœ‹æ¥æ”¶æ¶ˆæ¯çš„å¤„ç†ã€‚

  ---
  æŒ‡ä»¤1: å¸¸é‡å¯¹é½ (Constant Alignment)

  è§¦å‘æ¡ä»¶: éœ€è¦ä½¿ç”¨æšä¸¾å€¼ã€IDã€é­”æ³•æ•°å­—

  ç›®æ ‡: ç¡®ä¿æœåŠ¡ç«¯å¸¸é‡ä¸å®¢æˆ·ç«¯å®Œå…¨ä¸€è‡´

  æ‰§è¡Œæ­¥éª¤:

  1. æŸ¥æ‰¾å®¢æˆ·ç«¯å¸¸é‡:
     - glob: "../Client/WuShuang2/**/{å…³é”®è¯}_def.lua"
     - grep: "{å¸¸é‡å}" ../Client/WuShuang2/Assets/LuaScript/common/

  2. åˆ›å»ºæœåŠ¡ç«¯å¸¸é‡ç±»:
     - è·¯å¾„: src/Project.Grains/Common/{åŠŸèƒ½å}Constant.cs
     - å‘½å: {åŠŸèƒ½å}Id (IDç±») / {åŠŸèƒ½å}Type (æšä¸¾ç±»)

  3. éªŒè¯å¯¹é½:
     - å¯¹ç…§å®¢æˆ·ç«¯é€ä¸€æ£€æŸ¥å¸¸é‡å€¼
     - æ·»åŠ  XML æ³¨é‡Šè¯´æ˜æ¥æºå’Œå«ä¹‰

  ä»£ç æ¨¡æ¿:

  namespace Project.Grains;

  /// <summary>
  /// {åŠŸèƒ½ä¸­æ–‡å} ID å¸¸é‡
  /// å¯¹åº”å®¢æˆ·ç«¯: ../Client/WuShuang2/Assets/LuaScript/common/{æ–‡ä»¶å}.lua
  /// </summary>
  public static class {åŠŸèƒ½å}Id
  {
      /// <summary>
      /// {å¸¸é‡ä¸­æ–‡å}
      /// å®¢æˆ·ç«¯: {å®¢æˆ·ç«¯å¸¸é‡å} = {å€¼}
      /// </summary>
      public const string {ConstantName} = "{value}";

      // æˆ–è€…ç”¨ static readonly (å¦‚æœæ˜¯å¤æ‚ç±»å‹)
      public static readonly string {ConstantName} = "{value}";
  }

  çœŸå®èŒƒä¾‹: ItemId.cs

  public static class ItemId
  {
      /// <summary>
      /// é‡‘å¸
      /// å®¢æˆ·ç«¯: ItemId.Coin = "coin"
      /// </summary>
      public static readonly string Coin = "coin";

      /// <summary>
      /// å®çŸ³
      /// å®¢æˆ·ç«¯: ItemId.Gem = "gem"
      /// </summary>
      public static readonly string Gem = "gem";

      /// <summary>
      /// æ‰è½è£…å¤‡ (ç‰¹æ®Šé”®,ç”¨äºæˆ˜æ–—æ‰è½)
      /// </summary>
      public static readonly string DropEquip = "drop_equip";
  }

  éªŒè¯æ¸…å•:
  - å¸¸é‡å€¼ä¸å®¢æˆ·ç«¯å®Œå…¨ä¸€è‡´
  - XML æ³¨é‡Šè¯´æ˜å®¢æˆ·ç«¯æ¥æº
  - å‘½åç¬¦åˆ C# è§„èŒƒ (PascalCase)
  - ç¼–è¯‘é€šè¿‡

  ---
  æŒ‡ä»¤2: é…ç½®é¢„å¤„ç† (Config Preprocessing)

  è§¦å‘æ¡ä»¶: éœ€è¦æŸ¥è¯¢é™æ€é…ç½®æ•°æ®

  ç›®æ ‡: é¢„å¤„ç†é…ç½®æ•°æ®,å°†è¿è¡Œæ—¶æŸ¥è¯¢è½¬ä¸ºå¯åŠ¨æ—¶è®¡ç®—

  æ‰§è¡Œæ­¥éª¤:

  1. æŸ¥çœ‹å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶:
     - cat: "../Client/Configs/{è¡¨å}.cfg"
     - ç¡®è®¤: å­—æ®µå«ä¹‰, æ•°æ®æ ¼å¼

  2. æŸ¥çœ‹å®¢æˆ·ç«¯ä½¿ç”¨æ–¹å¼:
     - glob: "../Client/WuShuang2/**/*{åŠŸèƒ½å}*.lua"
     - grep: "{é…ç½®å­—æ®µå}" ../Client/WuShuang2/Assets/LuaScript/
     - ç¡®è®¤: å¦‚ä½•æŸ¥è¯¢, å¦‚ä½•ä½¿ç”¨

  3. æ£€æŸ¥ç”Ÿæˆçš„é…ç½®ç±»:
     - è·¯å¾„: src/Project.Grains/Config/Generated/GeneratedTable/{è¡¨å}Config.cs
     - ç¡®è®¤: å­—æ®µç±»å‹æ­£ç¡®, å­—æ®µåä¸€è‡´

  4. åˆ›å»º Override é…ç½®ç±»:
     - è·¯å¾„: src/Project.Grains/Config/Overrides/{è¡¨å}.cs
     - å®ç°: é¢„å¤„ç†é€»è¾‘, æŸ¥è¯¢æ¥å£

  èŒè´£è¾¹ç•Œ:

  | èŒè´£       | å½’å±      | ç¤ºä¾‹                              |
  |----------|---------|---------------------------------|
  | âœ… å­—æ®µè§£æ   | é…ç½®ç±»     | è§£æ "victory|duration:60" â†’ List |
  | âœ… ç´¢å¼•å»ºç«‹   | é…ç½®ç±»     | æŒ‰ (stageId, dropTag) å»ºç«‹ç´¢å¼•       |
  | âœ… æ´¾ç”Ÿè®¡ç®—   | é…ç½®ç±»     | è®¡ç®—æ€»æƒé‡, ç»Ÿè®¡æ€ªç‰©æ•°é‡                   |
  | âœ… é™æ€æŸ¥è¯¢   | é…ç½®ç±»     | GetByName, GetDropGroups        |
  | âœ… å…³è”è¯»å–   | é…ç½®ç±»     | åœ¨ OnAllConfigLoaded ä¸­å…³è”å…¶ä»–è¡¨      |
  | âŒ ä¸šåŠ¡é€»è¾‘   | é…ç½®ç±»     | æŠ½å¥–, æ‰è½ç”Ÿæˆ, æˆ˜æ–—ç»“ç®—                  |
  | âœ… çº¯é™æ€ä¸šåŠ¡  | é…ç½®ç±»é™æ€æ–¹æ³• | æ‰è½æŠ½å¥– (drop_group.RollDrop)      |
  | âœ… æ¶‰åŠçŠ¶æ€ä¿®æ”¹ | æ¨¡å—ç±»     | å‘æ”¾å¥–åŠ±, æ‰£é™¤èµ„æº                      |

  ä»£ç ç»“æ„:

  namespace Project.Config;

  /// <summary>
  /// {è¡¨å} é…ç½®è¡¨
  /// {é…ç½®è¡¨çš„ä¸šåŠ¡æè¿°}
  /// å¯¹åº”å®¢æˆ·ç«¯é…ç½®: ../Client/Configs/{è¡¨å}.cfg
  /// </summary>
  public sealed partial class {è¡¨å} : BaseConfig
  {
      // ===== é™æ€ç´¢å¼• (å…¨å±€å…±äº«) =====

      /// <summary>
      /// {ç´¢å¼•è¯´æ˜}
      /// </summary>
      public static Dictionary<{KeyType}, {ValueType}> {IndexName} { get; } = new();

      // ===== æ´¾ç”Ÿå­—æ®µ (å®ä¾‹çº§åˆ«) =====

      /// <summary>
      /// {æ´¾ç”Ÿå­—æ®µè¯´æ˜}
      /// åœ¨ OnConfigLoaded/OnAllConfigLoaded ä¸­è®¡ç®—
      /// </summary>
      public {Type} {FieldName} { get; private set; }

      // ===== ç”Ÿå‘½å‘¨æœŸé’©å­ =====

      /// <summary>
      /// å•æ¡é…ç½®åŠ è½½å®Œæˆæ—¶è°ƒç”¨
      /// ç”¨äº: å­—æ®µè§£æ, è‡ªèº«æ´¾ç”Ÿè®¡ç®—, å»ºç«‹ç´¢å¼•
      /// </summary>
      public override void OnConfigLoaded()
      {
          base.OnConfigLoaded();

          // 1. è§£æå­—æ®µ
          ParseFields();

          // 2. è®¡ç®—æ´¾ç”Ÿå­—æ®µ
          DerivedField = Calculate();

          // 3. å»ºç«‹ç´¢å¼•
          if (!string.IsNullOrEmpty(key))
              IndexName[key] = this;
      }

      /// <summary>
      /// æ‰€æœ‰é…ç½®åŠ è½½å®Œæˆåè°ƒç”¨
      /// ç”¨äº: å…³è”å…¶ä»–è¡¨, å…¨å±€è®¡ç®—
      /// </summary>
      public override void OnAllConfigLoaded()
      {
          base.OnAllConfigLoaded();

          // å…³è”å…¶ä»–è¡¨
          var relatedConfig = Mgr?.Get<{OtherTable}>(relatedId);
          if (relatedConfig != null)
          {
              // ç¼“å­˜å…³è”æ•°æ®
          }
      }

      // ===== ç§æœ‰è¾…åŠ©æ–¹æ³• =====

      private void ParseFields()
      {
          // è§£æé€»è¾‘
      }

      // ===== é™æ€æŸ¥è¯¢æ¥å£ (ä»…å¿…éœ€çš„) =====

      /// <summary>
      /// {æŸ¥è¯¢æ–¹æ³•è¯´æ˜}
      /// </summary>
      public static {ReturnType}? {QueryMethod}({ParamType} param) =>
          IndexName.TryGetValue(param, out var result) ? result : null;

      // ===== é™æ€ä¸šåŠ¡æ–¹æ³• (çº¯é™æ€é€»è¾‘) =====

      /// <summary>
      /// {ä¸šåŠ¡æ–¹æ³•è¯´æ˜}
      /// çº¯é™æ€é€»è¾‘,ä¸ä¿®æ”¹çŠ¶æ€
      /// </summary>
      public static {ResultType} {BusinessMethod}(
          {ParamType1} param1,
          {ParamType2} param2,
          Random? random = null)
      {
          random ??= Random.Shared;

          // 1. æŸ¥è¯¢é…ç½®
          var config = QueryMethod(param1);

          // 2. æ‰§è¡Œè®¡ç®—
          var result = Calculate(config, param2, random);

          return result;
      }
  }

  çœŸå®èŒƒä¾‹1: stage.cs (å­—æ®µè§£æ + æŸ¥è¯¢æ¥å£)

  public sealed partial class stage : BaseConfig
  {
      // ===== æ´¾ç”Ÿå­—æ®µ =====

      /// <summary>
      /// è§£æåçš„æ˜Ÿçº§æ¡ä»¶åˆ—è¡¨
      /// </summary>
      public List<StarCondition> Stars { get; private set; } = new();

      // ===== ç”Ÿå‘½å‘¨æœŸé’©å­ =====

      public override void OnAllConfigLoaded()
      {
          base.OnAllConfigLoaded();
          ParseStars(); // è§£æå­—æ®µ
      }

      // ===== ç§æœ‰è¾…åŠ©æ–¹æ³• =====

      private void ParseStars()
      {
          if (string.IsNullOrEmpty(starConditions)) return;

          foreach (var part in starConditions.Split('|'))
          {
              var idx = part.IndexOf(':');
              if (idx > 0)
              {
                  var type = part[..idx].Trim();
                  var value = int.Parse(part[(idx + 1)..].Trim());
                  Stars.Add(new StarCondition { Type = type, Value = value });
              }
          }
      }

      // ===== æŸ¥è¯¢æ¥å£ =====

      /// <summary>
      /// æ ¹æ®æˆ¿é—´ç´¢å¼•è·å–æˆ¿é—´ID
      /// </summary>
      public string? GetRoomId(int roomIndex)
      {
          if (roomList == null || roomIndex < 1 || roomIndex > roomList.Count)
              return null;
          return roomList[roomIndex - 1];
      }

      // ===== ä¸šåŠ¡æ–¹æ³• =====

      /// <summary>
      /// è¯„åˆ¤æ˜Ÿçº§
      /// </summary>
      public int GetStars(bool win, int time, int revive, int hp = 0)
      {
          if (Stars.Count == 0) return win ? 1 : 0;
          if (Stars.All(c => Check(c, win, time, revive, hp))) return 3;
          if (Stars.Count >= 2 && Stars.Take(2).All(c => Check(c, win, time, revive, hp))) return 2;
          if (Check(Stars[0], win, time, revive, hp)) return 1;
          return 0;
      }
  }

  çœŸå®èŒƒä¾‹2: drop_group.cs (ç´¢å¼• + çº¯é™æ€ä¸šåŠ¡é€»è¾‘)

  public sealed partial class drop_group : BaseConfig
  {
      // ===== é™æ€ç´¢å¼• =====

      public static Dictionary<(string stageId, string dropTag), List<drop_group>> DropIndex { get; } = new();

      // ===== ç”Ÿå‘½å‘¨æœŸé’©å­ =====

      public override void OnAllConfigLoaded()
      {
          // å»ºç«‹ç´¢å¼•
          foreach (var stageId in stageList)
          {
              foreach (var dropTag in tagList)
              {
                  var key = (stageId, dropTag);
                  if (!DropIndex.TryGetValue(key, out var list))
                      DropIndex[key] = list = new List<drop_group>();
                  list.Add(this);
              }
          }
      }

      // ===== é™æ€æŸ¥è¯¢æ¥å£ =====

      private static List<drop_group>? GetDropGroups(string stageId, string dropTag) =>
          DropIndex.TryGetValue((stageId, dropTag), out var entries) ? entries : null;

      // ===== é™æ€ä¸šåŠ¡æ–¹æ³• (çº¯é™æ€é€»è¾‘) =====

      /// <summary>
      /// æ‰§è¡Œä¸€æ¬¡æ‰è½æŠ½å–
      /// çº¯é™æ€é€»è¾‘,ä¸ä¿®æ”¹ç©å®¶çŠ¶æ€
      /// </summary>
      public static List<(string type, string name, int count)> RollDrop(
          string stageId,
          string dropTag,
          Random? random = null)
      {
          random ??= Random.Shared;
          var result = new List<(string type, string name, int count)>();

          var dropGroups = GetDropGroups(stageId, dropTag);
          if (dropGroups == null || dropGroups.Count == 0)
              return result;

          foreach (var dropGroup in dropGroups)
          {
              // æ‰§è¡ŒæŠ½å¥–é€»è¾‘
              var reward = reward_pool.RandomReward(dropGroup.dropPool, random);
              if (reward != null)
              {
                  result.Add((reward.type, reward.name, reward.count));
              }
          }

          return result;
      }
  }

  çœŸå®èŒƒä¾‹3: room.cs (å…³è”å…¶ä»–è¡¨)

  public sealed partial class room : BaseConfig
  {
      // ===== æ´¾ç”Ÿå­—æ®µ =====

      public int dropNumberBoss { get; set; }
      public int dropNumberElite { get; set; }
      public int dropNumberNormal { get; set; }

      // ===== ç”Ÿå‘½å‘¨æœŸé’©å­ =====

      /// <summary>
      /// ä½¿ç”¨ OnAllConfigLoaded æ˜¯å› ä¸ºä¾èµ– trigger è¡¨
      /// </summary>
      public override void OnAllConfigLoaded()
      {
          // å…³è” trigger è¡¨,è·å–æ€ªç‰©æ•°é‡
          trigger? trigger = Mgr?.Get<trigger>(this.defaultTrigger);
          if (trigger == null) return;

          (dropNumberBoss, dropNumberElite, dropNumberNormal) = trigger.CountMonstersByDropTag();
      }
  }

  çœŸå®èŒƒä¾‹4: equipment.cs (å»ºç«‹åç§°ç´¢å¼•)

  public sealed partial class equipment : BaseConfig
  {
      // ===== é™æ€ç´¢å¼• =====

      public static Dictionary<string, equipment> NameIndex { get; } = new();

      // ===== ç”Ÿå‘½å‘¨æœŸé’©å­ =====

      public override void OnConfigLoaded()
      {
          if (string.IsNullOrEmpty(name)) return;
          NameIndex[name] = this;
      }

      // ===== é™æ€æŸ¥è¯¢æ¥å£ =====

      public static equipment? GetByName(string equipmentName) =>
          NameIndex.TryGetValue(equipmentName, out var equip) ? equip : null;

      public static int GetIdByName(string equipmentName) =>
          GetByName(equipmentName)?.id ?? 0;
  }

  è®¾è®¡åŸåˆ™:

  1. å•ä¸€èŒè´£: é…ç½®ç±»åªè´Ÿè´£è‡ªå·±è¡¨çš„æ•°æ®é¢„å¤„ç†å’ŒæŸ¥è¯¢
  2. OnConfigLoaded vs OnAllConfigLoaded:
    - OnConfigLoaded: ä»…ä¾èµ–è‡ªèº«å­—æ®µ (è§£æã€è®¡ç®—ã€ç´¢å¼•)
    - OnAllConfigLoaded: éœ€è¦å…³è”å…¶ä»–è¡¨ (è·¨è¡¨è¯»å–ã€å…¨å±€è®¡ç®—)
  3. é™æ€ä¸šåŠ¡é€»è¾‘æ”¾å“ªé‡Œ:
    - âœ… çº¯é™æ€è®¡ç®— (æ— çŠ¶æ€ä¿®æ”¹) â†’ é…ç½®ç±»é™æ€æ–¹æ³• (å¦‚ drop_group.RollDrop)
    - âŒ æ¶‰åŠçŠ¶æ€ä¿®æ”¹ â†’ æ¨¡å—ç±» (å¦‚å‘æ”¾å¥–åŠ±ã€æ‰£é™¤èµ„æº)
  4. æ¥å£ç²¾ç®€: åªæä¾›ä¸šåŠ¡å¿…éœ€çš„æŸ¥è¯¢å’Œä¸šåŠ¡æ–¹æ³•,é¿å…è¿‡åº¦å°è£…

  éªŒè¯æ¸…å•:
  - å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶å·²æŸ¥çœ‹
  - å®¢æˆ·ç«¯ä½¿ç”¨æ–¹å¼å·²ç†è§£
  - Override ç±»æ–‡ä»¶å·²åˆ›å»º
  - ç”Ÿå‘½å‘¨æœŸé’©å­æ­£ç¡®ä½¿ç”¨
  - é™æ€ç´¢å¼•æ­£ç¡®å»ºç«‹
  - æŸ¥è¯¢æ¥å£å¿…éœ€ä¸”ç²¾ç®€
  - é™æ€ä¸šåŠ¡é€»è¾‘èŒè´£æ¸…æ™°
  - XML æ³¨é‡Šå®Œæ•´
  - ç¼–è¯‘é€šè¿‡

  ---
  æŒ‡ä»¤3: æ¨¡å—å¼ºç±»å‹åŒ– (Module Typing)

  è§¦å‘æ¡ä»¶: éœ€è¦è¯»å†™æ¨¡å—æ•°æ® (_state.State.ModuleData.{æ¨¡å—å})

  ç›®æ ‡: å°†å¼±ç±»å‹æ¨¡å—è½¬ä¸ºå¼ºç±»å‹,ç¡®ä¿ä¸å®¢æˆ·ç«¯ 100% å…¼å®¹

  æ‰§è¡Œæ­¥éª¤:

  1. æŸ¥çœ‹å®¢æˆ·ç«¯æ¨¡å—å®šä¹‰:
     - æ–‡ä»¶: module_def.lua
     - ç¡®è®¤: æ¨¡å—å­—æ®µ, å­—æ®µç±»å‹, é»˜è®¤å€¼

  2. æŸ¥çœ‹å®¢æˆ·ç«¯æ•°æ®æšä¸¾:
     - æ–‡ä»¶: data_enum.lua
     - ç¡®è®¤: JSON åºåˆ—åŒ–ç´¢å¼•, åµŒå¥—å¯¹è±¡å­—æ®µ

  3. æŸ¥çœ‹å®¢æˆ·ç«¯ä½æ“ä½œ (å¦‚æœ‰):
     - æœç´¢: "MASK\|0x[0-9A-F]" ç›¸å…³ä»£ç 
     - ç¡®è®¤: ä½å­—æ®µå¸ƒå±€, æ©ç , ç§»ä½

  4. è®¾è®¡å¼ºç±»å‹ç»“æ„:
     - æ¨¡å—ç±»: src/Project.Grains/Player/Modules/{æ¨¡å—å}Module.cs
     - æ•°æ®ç±»: src/Project.Grains/Player/Modules/{æ¨¡å—å}/{æ•°æ®å}Data.cs

  5. å®ç°ä»£ç :
     - åºåˆ—åŒ–å­—æ®µ (JsonPropertyName æ•°å­—ç´¢å¼•)
     - ä¸šåŠ¡å±æ€§ (JsonIgnore, ç›´æ¥è¯»å†™ä½å­—æ®µ)
     - ä¸šåŠ¡æ–¹æ³• (å¢åˆ æ”¹æŸ¥, è‡ªåŠ¨ç»´æŠ¤æ´¾ç”Ÿå­—æ®µ)

  6. ç¼–å†™éªŒè¯æµ‹è¯•:
     - æµ‹è¯•é¡¹ç›®: test/{æ¨¡å—å}Test/
     - éªŒè¯: JSON åºåˆ—åŒ–, ä½å­—æ®µ, ååºåˆ—åŒ–

  å‚è€ƒæ–‡æ¡£: è¯¦è§ CLAUDE.md ä¸­çš„ "æ¨¡å—å¼ºç±»å‹åŒ–é‡æ„ SOP"

  çœŸå®èŒƒä¾‹1: BattleModule.cs (å¤æ‚ä¸šåŠ¡é€»è¾‘)

  /// <summary>
  /// æˆ˜æ–—æ¨¡å—æ•°æ®
  /// å¯¹åº”å®¢æˆ·ç«¯ module_def.lua ä¸­çš„ BATTLE æ¨¡å—
  /// </summary>
  public class BattleModule
  {
      // ===== åºåˆ—åŒ–å­—æ®µ =====

      [JsonPropertyName("1")]
      public Dictionary<string, RoomDropData> Data { get; set; } = new();

      [JsonPropertyName("3")]
      public int Room { get; set; } = 0;

      [JsonPropertyName("4")]
      public string Stage { get; set; } = "";

      // ===== ä¸šåŠ¡æ–¹æ³• =====

      /// <summary>
      /// åˆ¤æ–­ç©å®¶æ˜¯å¦åœ¨æˆ˜æ–—ä¸­
      /// </summary>
      public bool IsInBattle() => !string.IsNullOrEmpty(Stage);

      /// <summary>
      /// å¼€å§‹æˆ˜æ–—
      /// é›†æˆ: éªŒè¯å…³å¡, æ‰£é™¤èµ„æº, åˆå§‹åŒ–çŠ¶æ€, é¢„ç”Ÿæˆæ‰è½
      /// </summary>
      public bool StartBattle(string stageId, ModuleDef modules, ConfigMgr configMgr)
      {
          // 1. éªŒè¯å…³å¡é…ç½®
          var stageConfig = configMgr.Get<stage>(stageId);
          if (stageConfig == null || stageConfig.isOpen != 1)
              return false;

          // 2. æ£€æŸ¥å¹¶æ‰£é™¤èµ„æº
          if (!modules.ECO.ConsumeResources(stageConfig.cost))
              return false;

          // 3. åˆå§‹åŒ–æˆ˜æ–—çŠ¶æ€
          Stage = stageId;
          Room = 0;

          // 4. é¢„ç”Ÿæˆç¬¬1ä¸ªæˆ¿é—´çš„æ‰è½æ•°æ®
          var firstRoomId = stageConfig.GetRoomId(1);
          if (firstRoomId != null)
          {
              var dropData = RoomDropData.Create(stageId, firstRoomId, configMgr);
              if (dropData is { Count: > 0 })
              {
                  Data["1"] = dropData;
              }
          }

          return true;
      }

      /// <summary>
      /// è¿›å…¥æˆ¿é—´
      /// éªŒè¯æˆ¿é—´ç´¢å¼•, é¢„ç”Ÿæˆä¸‹ä¸€ä¸ªæˆ¿é—´æ‰è½
      /// </summary>
      public bool EnterRoom(
          string stageId,
          int roomIndex,
          string roomId,
          int time,
          string? fateRoom,
          ConfigMgr configMgr)
      {
          // éªŒè¯çŠ¶æ€
          if (!IsInBattle() || Stage != stageId)
              return false;

          // éªŒè¯æˆ¿é—´ç´¢å¼• (å¿…é¡»æ˜¯å½“å‰æˆ¿é—´+1, é˜²æ­¢è·³å…³)
          if (roomIndex != Room + 1)
              return false;

          // æ›´æ–°çŠ¶æ€
          Room = roomIndex;

          // é¢„ç”Ÿæˆä¸‹ä¸€ä¸ªæˆ¿é—´æ‰è½
          var stageConfig = configMgr.Get<stage>(stageId);
          if (stageConfig != null)
          {
              var nextRoomId = stageConfig.GetRoomId(roomIndex + 1);
              if (nextRoomId != null)
              {
                  var nextRoomIndex = (roomIndex + 1).ToString();
                  var dropData = RoomDropData.Create(stageId, nextRoomId, configMgr);
                  if (dropData is { Count: > 0 })
                  {
                      Data[nextRoomIndex] = dropData;
                  }
              }
          }

          return true;
      }
  }

  çœŸå®èŒƒä¾‹2: EconomicModule.cs (èµ„æºç®¡ç†)

  /// <summary>
  /// ç»æµæ¨¡å—
  /// å¯¹åº”å®¢æˆ·ç«¯ module_def.lua ä¸­çš„ ECO æ¨¡å—
  /// </summary>
  public class EconomicModule
  {
      // ===== åºåˆ—åŒ–å­—æ®µ =====

      [JsonPropertyName("1")]
      public Dictionary<string, int> d { get; set; } = new()
      {
          [ItemId.Coin] = 0,
          [ItemId.Gem] = 5000,
      };

      // ===== ä¾¿æ·å±æ€§ =====

      [JsonIgnore]
      public int Coin
      {
          get => GetResourceCount(ItemId.Coin);
          set => d[ItemId.Coin] = value;
      }

      // ===== ä¸šåŠ¡æ–¹æ³• =====

      /// <summary>
      /// è·å–èµ„æºæ•°é‡
      /// </summary>
      public int GetResourceCount(string itemId)
      {
          return d.GetValueOrDefault(itemId, 0);
      }

      /// <summary>
      /// æ£€æŸ¥èµ„æºæ˜¯å¦è¶³å¤Ÿ
      /// </summary>
      public bool HasEnoughResources(item_number? cost)
      {
          if (cost == null || string.IsNullOrEmpty(cost.item_id) || cost.number <= 0)
              return true;
          return GetResourceCount(cost.item_id) >= cost.number;
      }

      /// <summary>
      /// æ·»åŠ èµ„æº
      /// </summary>
      public void AddResource(string itemId, int count)
      {
          if (string.IsNullOrEmpty(itemId) || count == 0)
              return;
          d[itemId] = d.GetValueOrDefault(itemId, 0) + count;
      }

      /// <summary>
      /// æ‰£é™¤èµ„æº
      /// </summary>
      public bool ConsumeResources(item_number? cost)
      {
          if (cost == null || string.IsNullOrEmpty(cost.item_id) || cost.number <= 0)
              return true;

          if (!HasEnoughResources(cost))
              return false;

          AddResource(cost.item_id, -cost.number);
          return true;
      }
  }

  çœŸå®èŒƒä¾‹3: EquipModule.cs (é›†åˆç®¡ç†)

  /// <summary>
  /// è£…å¤‡æ¨¡å—
  /// å¯¹åº”å®¢æˆ·ç«¯ module_def.lua ä¸­çš„ EQUIP æ¨¡å—
  /// </summary>
  public class EquipModule
  {
      // ===== åºåˆ—åŒ–å­—æ®µ =====

      [JsonPropertyName("1")]
      public int ac { get; set; } = 0; // additional capacity

      [JsonPropertyName("2")]
      public int ec { get; set; } = 0; // equipment count

      [JsonPropertyName("3")]
      public Dictionary<string, EquipmentData> el { get; set; } = new();

      [JsonPropertyName("4")]
      public int euid { get; set; } = 1; // equipment unique id

      // ===== ä¸šåŠ¡æ–¹æ³• =====

      /// <summary>
      /// æ·»åŠ è£…å¤‡
      /// è‡ªåŠ¨ç»´æŠ¤ ec å’Œ euid
      /// </summary>
      public string AddEquipment(EquipmentData equipment)
      {
          var id = euid.ToString();
          el[id] = equipment;
          euid++;
          ec = el.Count; // è‡ªåŠ¨ç»´æŠ¤ count
          return id;
      }

      /// <summary>
      /// åˆ é™¤è£…å¤‡
      /// è‡ªåŠ¨ç»´æŠ¤ ec
      /// </summary>
      public bool RemoveEquipment(string equipId)
      {
          var removed = el.Remove(equipId);
          if (removed)
          {
              ec = el.Count; // è‡ªåŠ¨ç»´æŠ¤ count
          }
          return removed;
      }

      /// <summary>
      /// è·å–è£…å¤‡æ€»å®¹é‡
      /// </summary>
      public int GetCapacity()
      {
          const int DEFAULT_CAPACITY = 100;
          return DEFAULT_CAPACITY + ac;
      }

      /// <summary>
      /// æ£€æŸ¥å®¹é‡æ˜¯å¦å·²æ»¡
      /// </summary>
      public bool IsFull()
      {
          return ec >= GetCapacity();
      }
  }

  çœŸå®èŒƒä¾‹4: EquipmentData.cs (ä½å­—æ®µæ•°æ®ç±»)

  /// <summary>
  /// å•ä¸ªè£…å¤‡æ•°æ®
  /// å¯¹åº”å®¢æˆ·ç«¯ DataEnum ä¸­çš„ "equipment" å®šä¹‰
  /// </summary>
  public class EquipmentData
  {
      // ===== ä½å­—æ®µå¸¸é‡ =====

      private const int TEMPLATE_ID_MASK = 0x0FFF;
      private const int TEMPLATE_ID_SHIFT = 16;
      private const int STARS_MASK = 0xFF;
      private const int STARS_SHIFT = 8;
      private const int LEVEL_MASK = 0xFF;
      private const int NEW_MASK = unchecked((int)0x80000000);

      // ===== åºåˆ—åŒ–å­—æ®µ =====

      [JsonPropertyName("1")]
      public int base_value { get; set; }

      [JsonPropertyName("2")]
      public int distribution { get; set; }

      [JsonPropertyName("3")]
      public List<int> attr_list { get; set; } = new();

      // ===== ä¾¿æ·è®¿é—®å±æ€§ (é›¶å†—ä½™, ç›´æ¥è¯»å†™ä½å­—æ®µ) =====

      [JsonIgnore]
      public int TemplateId
      {
          get => (base_value >> TEMPLATE_ID_SHIFT) & TEMPLATE_ID_MASK;
          set => base_value = (base_value & ~(TEMPLATE_ID_MASK << TEMPLATE_ID_SHIFT))
                            | ((value & TEMPLATE_ID_MASK) << TEMPLATE_ID_SHIFT);
      }

      [JsonIgnore]
      public int Stars
      {
          get => (base_value >> STARS_SHIFT) & STARS_MASK;
          set => base_value = (base_value & ~(STARS_MASK << STARS_SHIFT))
                            | ((value & STARS_MASK) << STARS_SHIFT);
      }

      [JsonIgnore]
      public int Level
      {
          get => base_value & LEVEL_MASK;
          set => base_value = (base_value & ~LEVEL_MASK) | (value & LEVEL_MASK);
      }

      [JsonIgnore]
      public bool IsNew
      {
          get => (base_value & NEW_MASK) != 0;
          set
          {
              if (value)
                  base_value |= NEW_MASK;
              else
                  base_value &= ~NEW_MASK;
          }
      }

      // ===== å·¥å‚æ–¹æ³• =====

      public static EquipmentData Create(
          int templateId,
          int stars = 1,
          int level = 1,
          int distribution = 0,
          bool isNew = true)
      {
          return new EquipmentData
          {
              distribution = distribution,
              TemplateId = templateId,
              Stars = stars,
              Level = level,
              IsNew = isNew
          };
      }
  }

  è®¾è®¡åŸåˆ™:

  1. é›¶å†—ä½™è®¾è®¡: å±æ€§ç›´æ¥è¯»å†™åºåˆ—åŒ–å­—æ®µçš„ä½,ä¸è®¾ä¸­é—´å˜é‡
  2. è‡ªåŠ¨ç»´æŠ¤æ´¾ç”Ÿå­—æ®µ: åœ¨ä¸šåŠ¡æ–¹æ³•ä¸­è‡ªåŠ¨ç»´æŠ¤ countã€id ç­‰æ´¾ç”Ÿå­—æ®µ
  3. ä¸šåŠ¡å°è£…: éšè—å¤æ‚é€»è¾‘ (å¦‚ä½æ“ä½œã€éªŒè¯),æš´éœ²ä¸šåŠ¡è¯­ä¹‰
  4. é›†æˆä¸šåŠ¡æ–¹æ³•: æ¨¡å—æ–¹æ³•å¯ä»¥é›†æˆå¤šä¸ªæ­¥éª¤ (å¦‚ StartBattle åŒ…å«éªŒè¯ã€æ‰£è´¹ã€åˆå§‹åŒ–ã€é¢„ç”Ÿæˆ)

  éªŒè¯æ¸…å•:
  - JSON æ ¼å¼ä¸å®¢æˆ·ç«¯å®Œå…¨ä¸€è‡´
  - ä½å­—æ®µå¸ƒå±€ä¸å®¢æˆ·ç«¯å®Œå…¨ä¸€è‡´
  - åºåˆ—åŒ–å¾€è¿”æµ‹è¯•é€šè¿‡
  - ä¸šåŠ¡æ–¹æ³•è‡ªåŠ¨ç»´æŠ¤æ´¾ç”Ÿå­—æ®µ
  - ç¼–è¯‘é€šè¿‡

  ---
  æŒ‡ä»¤4: å®ç°æ¶ˆæ¯å‡½æ•° (Message Implementation)

  ç›®æ ‡: ç¼–å†™æ¶ˆæ¯å¤„ç†å™¨,ä½œä¸ºè¿æ¥ request å’Œ response çš„èƒ¶æ°´ä»£ç 

  æ‰§è¡Œæ­¥éª¤:

  1. ä¾èµ–æ£€æŸ¥:
     - ç¡®è®¤: æŒ‡ä»¤1 (å¸¸é‡), æŒ‡ä»¤2 (é…ç½®), æŒ‡ä»¤3 (æ¨¡å—) éƒ½å·²å®Œæˆ
     - å¦‚æœ‰ç¼ºå¤±: å›åˆ°å¯¹åº”æŒ‡ä»¤å®Œæˆä¾èµ–

  2. ç¼–å†™æ¶ˆæ¯å¤„ç†å™¨:
     - æ–‡ä»¶: src/Project.Grains/Player/MessageHandler/PlayerGrain.{æ¨¡å—å}.cs
     - æ–¹æ³•: [PlayerMessageHandler(tag)] async Task<response> Handle{æ¶ˆæ¯å}Async(request, response)

  3. éµå¾ªèƒ¶æ°´ä»£ç åŸåˆ™:
     - æå–å‚æ•°
     - éªŒè¯å‚æ•°
     - è°ƒç”¨ä¸šåŠ¡é€»è¾‘ (æ¨¡å—æ–¹æ³• / é…ç½®æŸ¥è¯¢)
     - å¡«å……å“åº”
     - è®°å½•æ—¥å¿—

  èƒ¶æ°´ä»£ç åŸåˆ™:

  | åŸåˆ™                | è¯´æ˜             | ç¤ºä¾‹                                                  |
  |-------------------|----------------|-----------------------------------------------------|
  | âœ… å‚æ•°æå–            | ä» request æå–å‚æ•° | var stageId = request.stage_id;                     |
  | âœ… å‚æ•°éªŒè¯            | è¾¹ç•Œæ£€æŸ¥ã€æƒé™æ£€æŸ¥      | if (string.IsNullOrEmpty(stageId)) return response; |
  | âœ… è°ƒç”¨ä¸šåŠ¡é€»è¾‘          | è°ƒç”¨æ¨¡å—æ–¹æ³• / é…ç½®æŸ¥è¯¢  | var success = modules.BATTLE.StartBattle(...);      |
  | âœ… å¡«å……å“åº”            | è®¾ç½® response å­—æ®µ | response.ret_code = success ? 1 : 0;                |
  | âœ… è®°å½•æ—¥å¿—            | è®°å½•å…³é”®æ“ä½œ         | _logger.LogInformation("å¼€å§‹æˆ˜æ–—: {StageId}", stageId); |
  | âŒ ä¸å†™ä¸šåŠ¡é€»è¾‘          | ä¸åœ¨æ¶ˆæ¯å‡½æ•°ä¸­å†™å¤æ‚é€»è¾‘   | åœ¨æ¶ˆæ¯å‡½æ•°ä¸­å†™æˆ˜æ–—ç»“ç®—                                         |
  | âŒ ä¸ç›´æ¥è®¿é—®é…ç½®å­—æ®µ       | ä½¿ç”¨é…ç½®ç±»æä¾›çš„æ¥å£     | ~~`config.starConditions.Split('                    |
  | âŒ ä¸æ‰‹åŠ¨è®¾ç½® sync_list | æ¡†æ¶è‡ªåŠ¨å¤„ç†         | response.sync_list = ...                            |

  ä»£ç ç»“æ„:

  [PlayerMessageHandler(C2S_Protocol.{MESSAGE_TAG}.Tag)]
  private async Task<C2S_SprotoType.{MESSAGE}.response> Handle{MESSAGE}Async(
      C2S_SprotoType.{MESSAGE}.request request,
      C2S_SprotoType.{MESSAGE}.response response)
  {
      // 1. æå–å‚æ•°
      var param1 = request.param1;
      var param2 = request.param2;

      // 2. å‚æ•°éªŒè¯
      if (param1 <= 0)
      {
          _logger.LogWarning("ç©å®¶ {PlayerId} å‚æ•°æ— æ•ˆ: param1={Param1}",
              _state.State.PlayerToken, param1);
          response.ret_code = 0;
          return response;
      }

      // 3. è°ƒç”¨ä¸šåŠ¡é€»è¾‘
      var modules = _state.State.ModuleData;
      var success = modules.{MODULE}.DoSomething(param1, param2);

      // 4. æŸ¥è¯¢é…ç½® (å¦‚éœ€è¦)
      var config = _configMgr.Get<{ConfigTable}>(configId);
      if (config == null)
      {
          _logger.LogWarning("é…ç½®ä¸å­˜åœ¨: {ConfigId}", configId);
          response.ret_code = 0;
          return response;
      }

      // 5. ä¿®æ”¹çŠ¶æ€ (æ¡†æ¶è‡ªåŠ¨åŒæ­¥åˆ° sync_list)
      modules.ECO.AddResource(ItemId.Coin, 100);

      // 6. å¡«å……å“åº”
      response.ret_code = success ? 1 : 0;

      // 7. ä¿å­˜çŠ¶æ€
      await _state.WriteStateAsync();

      // 8. è®°å½•æ—¥å¿—
      _logger.LogInformation("ç©å®¶ {PlayerId} {æ“ä½œ}æˆåŠŸ: param1={Param1}",
          _state.State.PlayerToken, param1);

      return response;
  }

  çœŸå®èŒƒä¾‹1: PlayerGrain.Battle.cs - BATTLE_START (ç®€å•è°ƒç”¨)

  [PlayerMessageHandler(C2S_Protocol.BATTLE_START.Tag)]
  private async Task<C2S_SprotoType.BATTLE_START.response> HandleBATTLE_STARTAsync(
      C2S_SprotoType.BATTLE_START.request request,
      C2S_SprotoType.BATTLE_START.response response)
  {
      var stageId = request.stage_id;

      var modules = _state.State.ModuleData;

      // è°ƒç”¨æˆ˜æ–—æ¨¡å—çš„ä¸šåŠ¡é€»è¾‘ (æ‰€æœ‰é€»è¾‘éƒ½åœ¨æ¨¡å—ä¸­)
      var success = modules.BATTLE.StartBattle(stageId, modules, _configMgr);

      if (success)
      {
          await _state.WriteStateAsync();
          response.ret_code = 1;
          _logger.LogInformation("ç©å®¶ {PlayerId} å¼€å§‹æˆ˜æ–—æˆåŠŸ: {StageId}",
              _state.State.PlayerToken, stageId);
      }
      else
      {
          response.ret_code = 0;
          _logger.LogWarning("ç©å®¶ {PlayerId} å¼€å§‹æˆ˜æ–—å¤±è´¥: {StageId}",
              _state.State.PlayerToken, stageId);
      }

      return response;
  }

  çœŸå®èŒƒä¾‹2: PlayerGrain.Battle.cs - BATTLE_ENTER_ROOM (å‚æ•°éªŒè¯ + é…ç½®æŸ¥è¯¢)

  [PlayerMessageHandler(C2S_Protocol.BATTLE_ENTER_ROOM.Tag)]
  private async Task<C2S_SprotoType.BATTLE_ENTER_ROOM.response> HandleBATTLE_ENTER_ROOMAsync(
      C2S_SprotoType.BATTLE_ENTER_ROOM.request request,
      C2S_SprotoType.BATTLE_ENTER_ROOM.response response)
  {
      // 1. æå–å‚æ•°
      var stageId = request.stage_id;
      var roomIndex = (int)request.room_index;
      var time = (int)request.time;
      var fateRoom = request.fate_room;

      var modules = _state.State.ModuleData;

      // 2. æŸ¥è¯¢é…ç½®
      var stageConfig = _configMgr.Get<stage>(stageId);
      if (stageConfig == null)
      {
          response.ret_code = 0;
          _logger.LogWarning("ç©å®¶ {PlayerId} è¿›å…¥æˆ¿é—´å¤±è´¥: å…³å¡é…ç½®ä¸å­˜åœ¨ {StageId}",
              _state.State.PlayerToken, stageId);
          return response;
      }

      // 3. è·å–æˆ¿é—´ID (ä½¿ç”¨é…ç½®ç±»æä¾›çš„æ¥å£)
      var roomId = stageConfig.GetRoomId(roomIndex);
      if (roomId == null)
      {
          response.ret_code = 0;
          _logger.LogWarning("ç©å®¶ {PlayerId} è¿›å…¥æˆ¿é—´å¤±è´¥: æˆ¿é—´ç´¢å¼•è¶Šç•Œ",
              _state.State.PlayerToken);
          return response;
      }

      // 4. è°ƒç”¨ä¸šåŠ¡é€»è¾‘
      var success = modules.BATTLE.EnterRoom(stageId, roomIndex, roomId, time, fateRoom, _configMgr);

      if (success)
      {
          await _state.WriteStateAsync();
          response.ret_code = 1;
          _logger.LogInformation("ç©å®¶ {PlayerId} è¿›å…¥æˆ¿é—´æˆåŠŸ: å…³å¡={StageId}, æˆ¿é—´={RoomIndex}",
              _state.State.PlayerToken, stageId, roomIndex);
      }
      else
      {
          response.ret_code = 0;
          _logger.LogWarning("ç©å®¶ {PlayerId} è¿›å…¥æˆ¿é—´å¤±è´¥",
              _state.State.PlayerToken);
      }

      return response;
  }

  è®¾è®¡åŸåˆ™:

  1. è–„å±‚è®¾è®¡: å‡½æ•°ä½“å°½å¯èƒ½çŸ­ (å»ºè®® < 30 è¡Œ)
  2. èŒè´£å•ä¸€: åªåšæ•°æ®è½¬æ¢å’Œè°ƒç”¨,ä¸å†™ä¸šåŠ¡é€»è¾‘
  3. æ—¥å¿—å®Œæ•´: è®°å½•å…³é”®æ“ä½œã€å‚æ•°ã€ç»“æœã€å¤±è´¥åŸå› 
  4. é”™è¯¯å¤„ç†: å‚æ•°éªŒè¯ã€é…ç½®æ£€æŸ¥ã€ä¸šåŠ¡å¤±è´¥éƒ½è¦æœ‰å¯¹åº”å¤„ç†

  éªŒè¯æ¸…å•:
  - æ‰€æœ‰ä¾èµ–å·²å®ç° (å¸¸é‡ã€é…ç½®ã€æ¨¡å—)
  - å‡½æ•°ä½“ç®€æ´ (èƒ¶æ°´ä»£ç )
  - å‚æ•°éªŒè¯å®Œæ•´
  - æ—¥å¿—è®°å½•å®Œæ•´
  - ç¼–è¯‘é€šè¿‡

  ---
  æŒ‡ä»¤5: ç¼–è¯‘éªŒè¯ (Compile Verification)

  ç›®æ ‡: ç¡®ä¿ä»£ç ç¼–è¯‘é€šè¿‡,0 é”™è¯¯ 0 è­¦å‘Š

  æ‰§è¡Œæ­¥éª¤:

  # ç¼–è¯‘æ•´ä¸ªè§£å†³æ–¹æ¡ˆ
  cd Server
  dotnet build Project.Server.sln

  # æˆ–ç¼–è¯‘å•ä¸ªé¡¹ç›®
  dotnet build src/Project.Grains/Project.Grains.csproj

  å¸¸è§é”™è¯¯å¤„ç†:

  | é”™è¯¯ç±»å‹                | åŸå›                     | è§£å†³æ–¹æ¡ˆ            |
  |---------------------|-----------------------|-----------------|
  | ç±»å‹ä¸åŒ¹é…               | æ¨¡å—å¼ºç±»å‹åŒ–å,æ—§ä»£ç ä»ä½¿ç”¨ object | ä¿®æ”¹ä¸ºå¼ºç±»å‹è®¿é—®        |
  | JsonPropertyName å†²çª | ä¸šåŠ¡å±æ€§å¿˜è®°æ ‡è®° JsonIgnore   | æ·»åŠ  [JsonIgnore] |
  | ä½æ“ä½œé”™è¯¯               | æ©ç æˆ–ç§»ä½é”™è¯¯               | å¯¹ç…§å®¢æˆ·ç«¯ä»£ç æ£€æŸ¥       |
  | ç¼ºå°‘å¼•ç”¨                | ç¼ºå°‘ using æˆ–é¡¹ç›®å¼•ç”¨        | æ·»åŠ å¼•ç”¨            |

  éªŒè¯æ¸…å•:
  - ç¼–è¯‘é€šè¿‡ (0 ä¸ªé”™è¯¯)
  - æ— è­¦å‘Š (0 ä¸ªè­¦å‘Š)
  - æ‰€æœ‰æ–‡ä»¶ä¿å­˜

  ---
  æŒ‡ä»¤6: å®¢æˆ·ç«¯æµ‹è¯• (Client Testing)

  ç›®æ ‡: å¯åŠ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯,éªŒè¯æ¶ˆæ¯å¾€è¿”

  æ‰§è¡Œæ­¥éª¤:

  1. å¯åŠ¨æœåŠ¡ç«¯:
     - å¯åŠ¨ Silo: cd src/Project.Silo && dotnet run
     - å¯åŠ¨ Gateway: cd src/Project.Gateway && dotnet run

  2. å¯åŠ¨å®¢æˆ·ç«¯:
     - æ‰“å¼€ Unity é¡¹ç›®: ../Client/WuShuang2
     - è¿è¡Œæ¸¸æˆ

  3. è§¦å‘æ¶ˆæ¯:
     - åœ¨æ¸¸æˆä¸­æ‰§è¡Œå¯¹åº”æ“ä½œ
     - è§‚å¯Ÿå®¢æˆ·ç«¯æ—¥å¿—
     - è§‚å¯ŸæœåŠ¡ç«¯æ—¥å¿—

  4. éªŒè¯ç»“æœ:
     - æ£€æŸ¥ response.ret_code
     - æ£€æŸ¥ sync_list æ˜¯å¦åŒæ­¥
     - æ£€æŸ¥å®¢æˆ·ç«¯ UI æ˜¯å¦æ­£ç¡®åˆ·æ–°

  éªŒè¯æ¸…å•:
  - æœåŠ¡ç«¯æ¥æ”¶åˆ°æ¶ˆæ¯
  - æœåŠ¡ç«¯è¿”å›æ­£ç¡®å“åº”
  - å®¢æˆ·ç«¯æ¥æ”¶åˆ°å“åº”
  - sync_list æ­£ç¡®åŒæ­¥
  - å®¢æˆ·ç«¯ UI æ­£ç¡®åˆ·æ–°
  - æ— å¼‚å¸¸æ—¥å¿—

  ---
  ğŸ“Š å®Œæ•´å·¥ä½œæµç¤ºä¾‹

  åœºæ™¯: å®ç° "è´­ä¹°å•†åº—ç‰©å“" æ¶ˆæ¯

  æŒ‡ä»¤0: å‰ç½®æ£€æŸ¥

  # 1. æŸ¥çœ‹åè®®å®šä¹‰
  cat ../Client/WuShuang2/Assets/LuaScript/common/proto_def.lua | grep -A 5 "BUY_SHOP_ITEM"

  # 2. æŸ¥çœ‹å®¢æˆ·ç«¯å‘é€æ—¶æœº
  grep -n "session:call.*buy_shop_item" ../Client/WuShuang2/**/*.lua

  # 3. æŸ¥çœ‹å®¢æˆ·ç«¯æ•°æ®æ¶ˆè´¹é€»è¾‘
  grep -n "economic_module.gold" ../Client/WuShuang2/**/*.lua

  # 4. æŸ¥çœ‹å®¢æˆ·ç«¯æ¥æ”¶å¤„ç†
  grep -n "function.*on_buy_shop_item" ../Client/WuShuang2/**/*.lua

  è¾“å‡º: ç†è§£è´­ä¹°æµç¨‹ã€æ‰£é™¤é‡‘å¸ã€å‘æ”¾ç‰©å“

  æŒ‡ä»¤1: å¸¸é‡å¯¹é½

  æ£€æŸ¥æ˜¯å¦éœ€è¦å•†åº—ç›¸å…³å¸¸é‡ â†’ å·²æœ‰ ItemId.cs,æ— éœ€æ–°å¢

  æŒ‡ä»¤2: é…ç½®é¢„å¤„ç†

  åˆ›å»º shop_item.cs:

  public sealed partial class shop_item : BaseConfig
  {
      /// <summary>
      /// è§£æåçš„æ¶ˆè€—
      /// </summary>
      public item_number ParsedCost { get; private set; }

      /// <summary>
      /// è§£æåçš„å¥–åŠ±
      /// </summary>
      public item_number ParsedReward { get; private set; }

      public override void OnConfigLoaded()
      {
          base.OnConfigLoaded();

          // è§£ææ¶ˆè€—å­—æ®µ "gold:100" â†’ {item_id="gold", number=100}
          ParsedCost = ParseItemNumber(cost);

          // è§£æå¥–åŠ±å­—æ®µ
          ParsedReward = ParseItemNumber(reward);
      }

      private item_number ParseItemNumber(string str)
      {
          var parts = str.Split(':');
          return new item_number
          {
              item_id = parts[0],
              number = int.Parse(parts[1])
          };
      }
  }

  æŒ‡ä»¤3: æ¨¡å—å¼ºç±»å‹åŒ–

  æ£€æŸ¥ EconomicModule â†’ å·²å®ç°,æ— éœ€æ–°å¢

  æŒ‡ä»¤4: å®ç°æ¶ˆæ¯å‡½æ•°

  åˆ›å»º PlayerGrain.Shop.cs:

  [PlayerMessageHandler(C2S_Protocol.BUY_SHOP_ITEM.Tag)]
  private async Task<C2S_SprotoType.BUY_SHOP_ITEM.response> HandleBUY_SHOP_ITEMAsync(
      C2S_SprotoType.BUY_SHOP_ITEM.request request,
      C2S_SprotoType.BUY_SHOP_ITEM.response response)
  {
      // 1. æå–å‚æ•°
      var itemId = request.item_id;

      // 2. æŸ¥è¯¢é…ç½®
      var shopItem = _configMgr.Get<shop_item>(itemId);
      if (shopItem == null)
      {
          _logger.LogWarning("å•†å“ä¸å­˜åœ¨: {ItemId}", itemId);
          response.ret_code = 0;
          return response;
      }

      var modules = _state.State.ModuleData;

      // 3. æ£€æŸ¥èµ„æº
      if (!modules.ECO.HasEnoughResources(shopItem.ParsedCost))
      {
          _logger.LogWarning("ç©å®¶ {PlayerId} é‡‘å¸ä¸è¶³",
              _state.State.PlayerToken);
          response.ret_code = 0;
          return response;
      }

      // 4. æ‰£é™¤èµ„æº
      modules.ECO.ConsumeResources(shopItem.ParsedCost);

      // 5. å‘æ”¾å¥–åŠ±
      modules.ECO.AddResource(shopItem.ParsedReward);

      // 6. ä¿å­˜çŠ¶æ€
      await _state.WriteStateAsync();

      response.ret_code = 1;
      _logger.LogInformation("ç©å®¶ {PlayerId} è´­ä¹°å•†å“æˆåŠŸ: {ItemId}",
          _state.State.PlayerToken, itemId);

      return response;
  }

  æŒ‡ä»¤5: ç¼–è¯‘éªŒè¯

  dotnet build src/Project.Grains/Project.Grains.csproj

  âœ… ç¼–è¯‘é€šè¿‡

  æŒ‡ä»¤6: å®¢æˆ·ç«¯æµ‹è¯•

  1. å¯åŠ¨æœåŠ¡ç«¯
  2. å¯åŠ¨å®¢æˆ·ç«¯
  3. æ‰“å¼€å•†åº—,ç‚¹å‡»è´­ä¹°
  4. è§‚å¯Ÿé‡‘å¸æ‰£é™¤,ç‰©å“å¢åŠ 

  âœ… æµ‹è¯•é€šè¿‡

  ---
  ğŸ“‹ å¿«é€Ÿæ£€æŸ¥æ¸…å•

  ä½¿ç”¨æ­¤æ¸…å•ç¡®ä¿æ¯ä¸ªæ¶ˆæ¯éƒ½æ­£ç¡®å®ç°:

  ## æ¶ˆæ¯: {æ¶ˆæ¯å}

  ### æŒ‡ä»¤0: å‰ç½®æ£€æŸ¥
  - [ ] åè®®å®šä¹‰å·²ç¡®è®¤
  - [ ] å®¢æˆ·ç«¯å‘é€æ—¶æœºå·²ç¡®è®¤
  - [ ] å®¢æˆ·ç«¯æ•°æ®æ¶ˆè´¹é€»è¾‘å·²ç¡®è®¤

  ### ä¾èµ–æ£€æŸ¥
  - [ ] éœ€è¦å¸¸é‡: {æ˜¯/å¦} â†’ {å¸¸é‡ç±»å}
  - [ ] éœ€è¦é…ç½®: {æ˜¯/å¦} â†’ {é…ç½®è¡¨å}
  - [ ] éœ€è¦æ¨¡å—: {æ˜¯/å¦} â†’ {æ¨¡å—å}

  ### æŒ‡ä»¤1: å¸¸é‡å¯¹é½
  - [ ] å¸¸é‡ç±»å·²åˆ›å»º (å¦‚éœ€è¦)
  - [ ] å¸¸é‡å€¼ä¸å®¢æˆ·ç«¯ä¸€è‡´
  - [ ] ç¼–è¯‘é€šè¿‡

  ### æŒ‡ä»¤2: é…ç½®é¢„å¤„ç†
  - [ ] Override ç±»å·²åˆ›å»º (å¦‚éœ€è¦)
  - [ ] ç”Ÿå‘½å‘¨æœŸé’©å­æ­£ç¡®å®ç°
  - [ ] é™æ€ç´¢å¼•/æŸ¥è¯¢æ¥å£å·²å®ç°
  - [ ] ç¼–è¯‘é€šè¿‡

  ### æŒ‡ä»¤3: æ¨¡å—å¼ºç±»å‹åŒ–
  - [ ] æ¨¡å—ç±»å·²åˆ›å»º (å¦‚éœ€è¦)
  - [ ] JSON æ ¼å¼ä¸å®¢æˆ·ç«¯ä¸€è‡´
  - [ ] ä¸šåŠ¡æ–¹æ³•å·²å®ç°
  - [ ] æµ‹è¯•é€šè¿‡
  - [ ] ç¼–è¯‘é€šè¿‡

  ### æŒ‡ä»¤4: å®ç°æ¶ˆæ¯å‡½æ•°
  - [ ] æ¶ˆæ¯å¤„ç†å™¨å·²åˆ›å»º
  - [ ] å‚æ•°éªŒè¯å®Œæ•´
  - [ ] ä¸šåŠ¡é€»è¾‘è°ƒç”¨æ­£ç¡®
  - [ ] æ—¥å¿—è®°å½•å®Œæ•´
  - [ ] ç¼–è¯‘é€šè¿‡

  ### æŒ‡ä»¤5: ç¼–è¯‘éªŒè¯
  - [ ] 0 ä¸ªé”™è¯¯
  - [ ] 0 ä¸ªè­¦å‘Š

  ### æŒ‡ä»¤6: å®¢æˆ·ç«¯æµ‹è¯•
  - [ ] æ¶ˆæ¯å¾€è¿”æ­£å¸¸
  - [ ] sync_list åŒæ­¥æ­£ç¡®
  - [ ] UI åˆ·æ–°æ­£ç¡®

  ---
  ğŸ“ æ ¸å¿ƒæ¦‚å¿µæ€»ç»“

  ä¸‰å±‚åˆ†ç¦»

  | å±‚æ¬¡  | èŒè´£      | ä½ç½®                     | ç¤ºä¾‹                                 |
  |-----|---------|------------------------|------------------------------------|
  | é™æ€å±‚ | é…ç½®æ•°æ®é¢„å¤„ç† | Config/Overrides/      | stage.cs, drop_group.cs            |
  | ä¸šåŠ¡å±‚ | æ¨¡å—ä¸šåŠ¡é€»è¾‘  | Player/Modules/        | BattleModule.cs, EconomicModule.cs |
  | èƒ¶æ°´å±‚ | æ¶ˆæ¯å¤„ç†å™¨   | Player/MessageHandler/ | PlayerGrain.Battle.cs              |

  èŒè´£è¾¹ç•Œ

  é…ç½®ç±» (é™æ€å±‚):
  - âœ… å­—æ®µè§£æã€ç´¢å¼•å»ºç«‹ã€æ´¾ç”Ÿè®¡ç®—
  - âœ… é™æ€æŸ¥è¯¢æ¥å£
  - âœ… çº¯é™æ€ä¸šåŠ¡é€»è¾‘ (å¦‚ drop_group.RollDrop)
  - âŒ çŠ¶æ€ä¿®æ”¹

  æ¨¡å—ç±» (ä¸šåŠ¡å±‚):
  - âœ… å°è£…çŠ¶æ€ä¿®æ”¹
  - âœ… ä¸šåŠ¡é€»è¾‘é›†æˆ
  - âœ… è‡ªåŠ¨ç»´æŠ¤æ´¾ç”Ÿå­—æ®µ
  - âŒ é…ç½®æ•°æ®è§£æ

  æ¶ˆæ¯å¤„ç†å™¨ (èƒ¶æ°´å±‚):
  - âœ… å‚æ•°æå–å’ŒéªŒè¯
  - âœ… è°ƒç”¨é…ç½®æŸ¥è¯¢å’Œæ¨¡å—æ–¹æ³•
  - âœ… å¡«å……å“åº”å’Œè®°å½•æ—¥å¿—
  - âŒ ä¸šåŠ¡é€»è¾‘å®ç°

  è®¾è®¡åŸåˆ™

  1. è‡ªåº•å‘ä¸Š: å…ˆä¾èµ–åä¸šåŠ¡
  2. å•ä¸€èŒè´£: æ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä»¶äº‹
  3. é›¶å†—ä½™: å±æ€§ç›´æ¥è¯»å†™ä½å­—æ®µ
  4. å®¢æˆ·ç«¯å¯¹é½: å¸¸é‡ã€é…ç½®ã€æ¨¡å—æ•°æ®ä¸å®¢æˆ·ç«¯ 100% ä¸€è‡´
  5. èƒ¶æ°´ä»£ç : æ¶ˆæ¯å¤„ç†å™¨å°½å¯èƒ½è–„ å¸®æˆ‘ä¿®æ”¹åˆ°é¡¹ç›®çš„CLAUDE.mdä¸­
```

**Claude**: æˆ‘éœ€è¦å°†è¿™ä¸ªæ ‡å‡†åŒ–å·¥ä½œæµç¨‹æ·»åŠ åˆ°é¡¹ç›®çš„ CLAUDE.md æ–‡ä»¶ä¸­ã€‚è®©æˆ‘å…ˆæŸ¥çœ‹å½“å‰çš„ CLAUDE.md æ–‡ä»¶ç»“æ„ã€‚

[Claude è¯»å–äº† CLAUDE.md æ–‡ä»¶]

å¥½çš„,æˆ‘ç°åœ¨å°†æŠŠæ‚¨æä¾›çš„"æœåŠ¡å™¨æ¶ˆæ¯å¼€å‘æ ‡å‡†åŒ–å·¥ä½œæµç¨‹"æ·»åŠ åˆ°é¡¹ç›®çš„ CLAUDE.md æ–‡ä»¶çš„æœ«å°¾ã€‚

[Claude ä½¿ç”¨ Edit å·¥å…·å°†å®Œæ•´çš„å·¥ä½œæµç¨‹æ·»åŠ åˆ° CLAUDE.md æ–‡ä»¶æœ«å°¾,åŒ…å«:
- æ ¸å¿ƒç†å¿µ
- æ€»ä½“æµç¨‹å›¾
- æŒ‡ä»¤0-6çš„è¯¦ç»†æ­¥éª¤
- å®Œæ•´å·¥ä½œæµç¤ºä¾‹
- å¿«é€Ÿæ£€æŸ¥æ¸…å•
- æ ¸å¿ƒæ¦‚å¿µæ€»ç»“]

å®Œæˆ!æˆ‘å·²ç»æˆåŠŸå°†"æœåŠ¡å™¨æ¶ˆæ¯å¼€å‘æ ‡å‡†åŒ–å·¥ä½œæµç¨‹"æ·»åŠ åˆ°é¡¹ç›®çš„ CLAUDE.md æ–‡ä»¶ä¸­ã€‚

è¿™ä¸ªå®Œæ•´çš„å·¥ä½œæµç¨‹åŒ…å«äº†:

âœ… **æ ¸å¿ƒç†å¿µ** - ä¸‰å±‚åˆ†ç¦»åŸåˆ™å’Œè‡ªåº•å‘ä¸ŠåŸåˆ™
âœ… **æ€»ä½“æµç¨‹å›¾** - 6ä¸ªæŒ‡ä»¤çš„å®Œæ•´æµç¨‹
âœ… **æŒ‡ä»¤0-6** - è¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤ã€ä»£ç æ¨¡æ¿å’ŒçœŸå®èŒƒä¾‹
âœ… **å®Œæ•´å·¥ä½œæµç¤ºä¾‹** - "è´­ä¹°å•†åº—ç‰©å“"çš„å®æˆ˜ç¤ºä¾‹
âœ… **å¿«é€Ÿæ£€æŸ¥æ¸…å•** - ç¡®ä¿æ¯ä¸ªæ¶ˆæ¯æ­£ç¡®å®ç°
âœ… **æ ¸å¿ƒæ¦‚å¿µæ€»ç»“** - ä¸‰å±‚åˆ†ç¦»ã€èŒè´£è¾¹ç•Œã€è®¾è®¡åŸåˆ™

æ–‡ä»¶å·²æ›´æ–°,æ‰€æœ‰å†…å®¹éƒ½å·²æ­£ç¡®æ·»åŠ åˆ° CLAUDE.md çš„æœ«å°¾,å½¢æˆäº†ä¸€ä¸ªå®Œæ•´çš„æ ‡å‡†åŒ–å¼€å‘æŒ‡å—ã€‚

---

### å¯¹è¯2
**ç”¨æˆ·**: ä¿å­˜å¯¹è¯

**Claude**: å¥½çš„,æˆ‘æ¥å¸®ä½ ä¿å­˜å¯¹è¯ã€‚æ ¹æ®å…¨å±€ CLAUDE.md ä¸­çš„å¤‡ä»½å¯¹è¯è§„èŒƒ,æˆ‘éœ€è¦:

1. ä¿å­˜å®Œæ•´å¯¹è¯åˆ° `sessions/` ç›®å½•
2. ç”Ÿæˆåˆ†ææŠ¥å‘Šåˆ° `analysis/` ç›®å½•

è®©æˆ‘å¼€å§‹æ‰§è¡Œå¤‡ä»½æ“ä½œã€‚

[åç»­æ“ä½œæ­£åœ¨è¿›è¡Œä¸­...]
